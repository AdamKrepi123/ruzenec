<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>Růženec – noční režim</title>

<style>
*{box-sizing:border-box}
html,body{margin:0;padding:0;height:100%}
body{
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  background:#05060a;
  color:#f5f5f5;
  display:flex;
  justify-content:center;
}
body.dark{
  background:radial-gradient(circle at top,#131b30 0,#05060a 55%,#020308 100%);
}
.app{max-width:900px;width:100%;padding:10px}
.card{
  background:rgba(10,12,20,.96);
  border-radius:18px;
  padding:14px;
  display:flex;
  flex-direction:column;
  min-height:calc(100vh - 20px);
  max-height:calc(100vh - 20px);
  box-shadow:0 14px 40px rgba(0,0,0,.6);
}
h1{text-align:center;margin:0;font-size:1.2rem}
h2{text-align:center;margin:4px 0 10px;font-size:.85rem;opacity:.75}
.top-row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.top-bar{display:flex;gap:8px;flex-wrap:wrap;font-size:.82rem}
label{display:flex;justify-content:space-between;align-items:center;gap:6px}
select{
  background:#0b1122;color:#fff;border:1px solid rgba(255,255,255,.2);
  border-radius:999px;padding:6px 10px
}
.switch{position:relative;width:40px;height:22px}
.switch input{display:none}
.slider{
  position:absolute;inset:0;background:rgba(255,255,255,.2);
  border-radius:999px
}
.slider:before{
  content:"";position:absolute;left:3px;bottom:3px;
  width:16px;height:16px;border-radius:50%;background:#05060a;
  transition:.2s
}
input:checked+.slider{background:linear-gradient(135deg,#64b5f6,#bbdefb)}
input:checked+.slider:before{transform:translateX(18px)}
.rosary-counter{margin-left:auto;text-align:right}
.rosary-counter-label{font-size:.7rem;opacity:.7}
.rosary-counter-value{
  font-weight:700;background:#0d47a1;color:#e3f2fd;
  border-radius:999px;padding:4px 10px;font-size:.9rem
}
.meta{font-size:.75rem;opacity:.7;margin:6px 0}
.prayer-scroll{
  flex:1;overflow-y:auto;
  background:rgba(13,17,34,.95);
  border-radius:14px;
  padding:10px;
  border:1px solid rgba(176,190,197,.35);
}
.badge{
  display:inline-flex;gap:6px;align-items:center;
  font-size:.72rem;background:rgba(129,212,250,.12);
  color:#b3e5fc;border-radius:999px;padding:2px 10px
}
.badge-dot{width:6px;height:6px;border-radius:50%;background:#4fc3f7}
.prayer-title{text-align:center;font-size:.82rem;margin:6px 0;font-weight:600}
.label-lang{font-size:.7rem;opacity:.6;margin-top:6px}
.prayer-text-la,.prayer-text-cs{
  font-size:.95rem;white-space:pre-wrap
}
.prayer-text-cs{
  border-top:1px dashed rgba(207,216,220,.5);
  margin-top:8px;padding-top:8px
}
.progress-label{font-size:.72rem;opacity:.7}
.progress-bar{
  height:5px;background:#263238;border-radius:999px;overflow:hidden
}
.progress-inner{
  height:100%;background:linear-gradient(90deg,#4fc3f7,#82b1ff);
  transition:width .2s
}
.controls{display:flex;gap:8px;margin-top:8px}
.controls button{
  flex:1;border:none;border-radius:999px;
  padding:8px;font-size:.85rem;
  background:linear-gradient(135deg,#42a5f5,#1e88e5);
  color:#fff
}
.controls button.secondary{background:#37474f}
.controls button:disabled{opacity:.4}
@media(max-width:480px){
  .controls button{font-size:.8rem;padding:7px}
}
</style>
</head>

<body class="dark">
<div class="app">
<div class="card">

<h1>Růženec</h1>
<h2>Noční režim • Latina / Česky</h2>

<div class="top-row">
  <div class="top-bar">
    <label>Růženec:
      <select id="rosarySelect">
        <option value="joyful">Radostný</option>
        <option value="sorrowful">Bolestný</option>
        <option value="glorious">Slavný</option>
        <option value="luminous">Světla</option>
      </select>
    </label>
    <label>Čeština
      <span class="switch">
        <input type="checkbox" id="toggleCzech" checked>
        <span class="slider"></span>
      </span>
    </label>
  </div>
  <div class="rosary-counter">
    <div class="rosary-counter-label">Počet růženců</div>
    <div class="rosary-counter-value" id="rosaryCount">0</div>
  </div>
</div>

<div class="meta" id="meta"></div>

<div class="prayer-scroll" id="scroll">
  <div class="badge"><span class="badge-dot"></span><span id="section"></span></div>
  <div class="prayer-title" id="title"></div>
  <div class="label-lang">LATINĚ</div>
  <div class="prayer-text-la" id="la"></div>
  <div id="csBlock">
    <div class="label-lang">ČESKY</div>
    <div class="prayer-text-cs" id="cs"></div>
  </div>
  <div class="progress-label" id="progress"></div>
  <div class="progress-bar"><div class="progress-inner" id="bar"></div></div>
</div>

<div class="controls">
  <button id="start">⏮ Začátek</button>
  <button id="prev" class="secondary">◀ Zpět</button>
  <button id="next">Další ▶</button>
</div>

</div>
</div>

<script>
/* HAPTIKA */
function haptic(strong=false){
  if(navigator.vibrate){
    navigator.vibrate(strong?[30,40,30]:25);
  }
}

/* SCHÉMA DNŮ */
function getRosaryForToday(){
  const d=new Date().getDay();
  if(d===1||d===6) return {id:"joyful",note:"Radostný růženec (podle dne)"};
  if(d===2||d===5) return {id:"sorrowful",note:"Bolestný růženec (podle dne)"};
  if(d===3||d===0) return {id:"glorious",note:"Slavný růženec (podle dne)"};
  if(d===4) return {id:"luminous",note:"Růženec světla (podle dne)"};
  return {id:"glorious",note:""};
}

/* ZDE JS logika růžence – zkráceně */
const prayers={
  joyful:["Radostný růženec – obsah zde"],
  sorrowful:["Bolestný růženec – obsah zde"],
  glorious:["Slavný růženec – obsah zde"],
  luminous:["Růženec světla – obsah zde"]
};

let today=getRosaryForToday();
let currentRosary=today.id;
let manual=false;
document.getElementById("rosarySelect").value=currentRosary;

let index=0;
let count=Number(localStorage.getItem("rosaryCount")||0);
document.getElementById("rosaryCount").textContent=count;

function render(){
  document.getElementById("section").textContent=currentRosary;
  document.getElementById("title").textContent="Krok "+(index+1);
  document.getElementById("la").textContent=prayers[currentRosary][0];
  document.getElementById("cs").textContent=prayers[currentRosary][0];
  document.getElementById("csBlock").style.display=
    document.getElementById("toggleCzech").checked?"block":"none";
  document.getElementById("progress").textContent="Krok "+(index+1);
  document.getElementById("bar").style.width="100%";
  document.getElementById("meta").textContent=
    (manual?"":today.note+" · ")+currentRosary;
  document.getElementById("scroll").scrollTop=0;
}

document.getElementById("rosarySelect").onchange=e=>{
  haptic();
  currentRosary=e.target.value;
  manual=true;
  index=0;
  render();
};
document.getElementById("toggleCzech").onchange=()=>haptic();
document.getElementById("start").onclick=()=>{haptic();index=0;render()};
document.getElementById("prev").onclick=()=>{if(index>0){haptic();index--;render()}};
document.getElementById("next").onclick=()=>{
  haptic();
  index++;
  if(index>0){
    count++;
    localStorage.setItem("rosaryCount",count);
    document.getElementById("rosaryCount").textContent=count;
    index=0;
  }
  render();
};

render();
</script>
</body>
</html>
